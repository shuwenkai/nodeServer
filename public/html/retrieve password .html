<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <!--如果用户使用IE浏览器打开页面，使用IE的最高版本或者IE的兼容模式-->
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <!--initial-scale=1:设置初始化缩放比例为1 -->
    <meta name="viewport" content="width=device-width, initial-scale=1">

    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>Bootstrap 101 Template</title>

    <!-- Bootstrap -->
    <link href="../js/bootstrap/css/bootstrap.css" rel="stylesheet">

    <!-- HTML5 shim 和 Respjs1d.js 是为了让 IE8 支持 HTML5 元素和媒体查询（media queries）功能 -->
    <!-- 警告：通过 file:// 协议（就是直接将 html 页面拖拽到浏览器中）访问页面时 Respjs1d.js 不起作用 -->
    <!--[if lt IE 9]>
    <script src="https://cdn.bootcss.com/html5shiv/3.7.3/html5shiv.min.js"></script>
    <script src="https://cdn.bootcss.com/respond.js/1.4.2/respond.min.js"></script>
    <![endif]-->

    <style type="text/css">
        ::selection{
            background-color: #F4F4F4;
        }
        body{
            background-image: url("../img/images/bg.png");
            /*background-color: rgba(244, 244, 244, 0.82);*/
        }
        html{
            width: 100%;
            height: 100%;
            font-size: 16px;
        }
        body{
            width: 100%;
            height: 100%;
            -moz-user-select: none; /*火狐*/ /*禁止用户在页面选择文字*/
            -webkit-user-select: none; /*webkit浏览器*/
            -ms-user-select: none; /*IE10*/
            -khtml-user-select: none; /*早期浏览器*/
            user-select: none;
        }
        .code{
            width: 400px;
            margin:0 auto;
        }
        .input-val{
            width: 295px;
            background: #ffffff;
            height: 2.8rem;
            padding: 0 2%;
            /*border-radius: 5px;*/
            border: none;
            border: 1px solid rgba(0,0,0,.2);
            font-size: 1.0625rem;
        }
        #canvas{
            float:right;
            display: inline-block;
            border:1px solid #ccc;
            margin-top: 20px;
        }

        .btn1{
            width: 105px;
            height: 30px;
            background: #cbaf7f;
            color: snow;
            margin: 20px auto 0;
            font-size: 1rem;
            cursor: pointer;
            display: inline-block;
            margin-right: 8px;
            text-align: center;
            line-height: 30px;
        }
        h4{
            font-family: "Helvetica Neue", Helvetica, Arial, sans-serif;
            font-size: 16px;
            margin-bottom:45px;
            color: #736c65;
        }
        /*.container{*/
            /*padding-top: 80px;*/
        /*}*/
        .input::-webkit-input-placeholder {
            color: #c1b7ae;
            font-size: 12px;
            text-align: left;
            font-weight: lighter;
        }
        .input{
            margin-left: 20px;
            height: 30px;
            padding-left: 5px;
            font-size: 13px;
            width: 260px;
            border:1px solid #c1b7ae;
            border-top-color:#999087;
        }
        .input:focus{
            outline: none;
        }
        #input2{
            width: 125px;
            margin-top: 20px;
            margin-left: 15px;
        }
        #quxiao{
            border: 1px solid #e4e0dc ;
            background-color: #fff;
        }
        a{
            text-decoration: none;
            color: #999188;
        }
        #quxiao:hover a{
            text-decoration: none;
            color:#999188;
        }
        .tijaio{
            margin-top: 40px;
        }
        #btn:hover{
            cursor: pointer;
            background-color: #ba9f74;
            color: #dfdfdf;
        }
        #qiehuan{
            margin-top: 34px;
            margin-left: 5px;
            float: right;
            color: #aba082;
            transition: all .3s;
            cursor: pointer;
        }
        #qiehuan:hover{
            color: black;
        }
    </style>
</head>
<body>

<div class="container" style="padding-bottom:140px;padding-top: 140px">
    <form action=""></form>
    <div class="row">
        <div class="col-sm-6 col-sm-offset-4 col-xs-6 col-xs-offset-1">
            <h4>找回密码</h4>
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 col-sm-offset-4 col-xs-6 col-xs-offset-1" style="width: 350px" >
            <label>
                <span style="font-weight: lighter;color: #aea59d">账 &nbsp;号</span></label>
            <input class="input" id="input" type="text" placeholder="请输入邮箱/用户名/手机号/门店会员卡号" name="zhangHao">
        </div>
    </div>
    <div class="row">
        <div class="col-sm-6 col-sm-offset-4 col-xs-6 col-xs-offset-1" style="width: 550px" >
            <div style="display: inline-block;width: 329px;">
                <label>
                    <span style="font-weight: lighter;color: #aea59d">验证码</span></label>
                <input class="input input-val" id="input2" type="text" placeholder="请输入验证码">
                <span id="qiehuan">换一张</span>
                <canvas id="canvas" width="90" height="28"></canvas>
            </div>
            <span></span>
        </div>
    </div>

    <div class="row tijaio">
        <div class="col-sm-6 col-sm-offset-4 col-xs-6 col-xs-offset-1" style="width: 350px" >
            <div id="btn" class="btn1">下一步</div>
            <div class="btn1" id="quxiao"><a href="register.html">取消</a></div>
        </div>
    </div>
</div>

<div id="nav"></div>
<div id="footer"></div>
<div id="backtop"></div>
<script src="../js/jquery-3.3.1.js"></script>
<script src="../js/bootstrap/js/bootstrap.js"></script>
<script type="text/javascript" src="../js/js.js"></script>
<script type="text/javascript">





    $("#input").focusin(function () {
        var e=window.event||arguments[0];
        $(this).attr({
            placeholder:""
        });
        e.stopPropagation()
    });
    $("#input").focusout(function () {
        if($(this).val()==""){
            $(this).attr({
                placeholder:"请输入邮箱/用户名/手机号/门店会员卡号"
            })
        }
    });

    $("#input2").focusin(function () {
        var e=window.event||arguments[0];
        $(this).attr({
            placeholder:""
        });
        e.stopPropagation()
    });
    $("#input2").focusout(function () {
        if($(this).val()==""){
            $(this).attr({
                placeholder:"请输入验证码"
            })
        }
    });


    $(function(){
        var show_num = [];
        draw(show_num);

        $("#qiehuan").on('click',function(){
            draw(show_num);
        });
        $("#btn").on('click',function(){
            var val = $(".input-val").val().toLowerCase();
            var num = show_num.join("");
            if(val==''){
                alert('请输入验证码！');
            }else if(val == num){
                var a=$("#input").val();
//                window.location="/zhaohui.do?zhangHao="+a+"";
                window.location="retrieve password 2.html";

                alert('提交成功！');
                $(".input-val").val('');
                draw(show_num);

            }else{
                alert('验证码错误！请重新输入！');
                $(".input-val").val('');
                draw(show_num);
            }
        })
    });

    function draw(show_num) {
        var canvas_width=$('#canvas').width();
        var canvas_height=$('#canvas').height();
        var canvas = document.getElementById("canvas");//获取到canvas的对象，演员
        var context = canvas.getContext("2d");//获取到canvas画图的环境，演员表演的舞台
        canvas.width = canvas_width;
        canvas.height = canvas_height;
        var sCode = "A,B,C,E,F,G,H,J,K,L,M,N,P,Q,R,S,T,W,X,Y,Z,1,2,3,4,5,6,7,8,9,0,q,w,e,r,t,y,u,i,o,p,a,s,d,f,g,h,j,k,l,z";
        var aCode = sCode.split(",");
        var aLength = aCode.length;//获取到数组的长度

        for (var i = 0; i <= 3; i++) {
            var j = Math.floor(Math.random() * aLength);//获取到随机的索引值
            var deg = Math.random() * 50 * Math.PI / 180;//产生0~30之间的随机弧度
            var txt = aCode[j];//得到随机的一个内容
            show_num[i] = txt.toLowerCase();
            var x = 5 + i * 20;//文字在canvas上的x坐标
            var y = 15 + Math.random() * 8;//文字在canvas上的y坐标
            context.font = "bold 23px 微软雅黑";

            context.translate(x, y);
            context.rotate(deg);

            context.fillStyle = randomColor();
            context.fillText(txt, 0, 0);

            context.rotate(-deg);
            context.translate(-x, -y);
        }
        for (var i = 0; i <= 5; i++) { //验证码上显示线条
            context.strokeStyle = randomColor();
            context.beginPath();
            context.moveTo(Math.random() * canvas_width, Math.random() * canvas_height);
            context.lineTo(Math.random() * canvas_width, Math.random() * canvas_height);
            context.stroke();
        }
        for (var i = 0; i <= 30; i++) { //验证码上显示小点
            context.strokeStyle = randomColor();
            context.beginPath();
            var x = Math.random() * canvas_width;
            var y = Math.random() * canvas_height;
            context.moveTo(x, y);
            context.lineTo(x + 1, y + 1);
            context.stroke();
        }
    }

    function randomColor() {//得到随机的颜色值
        var r = Math.floor(Math.random() * 256);
        var g = Math.floor(Math.random() * 256);
        var b = Math.floor(Math.random() * 256);
        return "rgb(" + r + "," + g + "," + b + ")";
    }
</script>
<script>
    $("#nav").load("nav.html");
    $("#footer").load("footerStatic.html");
    $("#backtop").load("backtop.html");
</script>
</body>
</html>
